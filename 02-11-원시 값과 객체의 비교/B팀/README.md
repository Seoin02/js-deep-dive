# 11. 원시 값과 객체의 비교

**원시 타입과 객체 타입의 차이**

|                     | 원시 타입             | 객체 타입           |
| ------------------- | --------------------- | ------------------- |
| 변경 가능성         | 변경 불가능한 값      | 변경 가능한 값      |
| 변수에 할당 시      | 변수에 실제 값 저장   | 변수에 참조 값 저장 |
| 다른 변수에 할당 시 | 원시 값이 복사돼 전달 |
| (값에 의한 전달)    | 참조 값이 복사돼 전달 |
| (참조에 의한 전달)  |

## 11.1 원시 값

- 변경 불가능한 값(읽기 전용) ⇒ 데이터의 `신뢰성` 보장
- 원시 값 자체를 변경할 수 없다는 것이지, 변수 값을 변경할 수 없다는 게 아니다. ⇒ 변수는 재할당으로 값을 변경할 수 있다.
- 원시 값은 상수와 다르다. 상수는 재할당이 금지된 변수이다.
- 원시 값을 할당한 변수에 새로운 원시 값을 재할당하면 메모리 공간에 저장돼있는 원시 값을 변경하는 게 아니라 새 메모리 공간을 확보해 저장한다. `값의 불변성`
  ⇒ 변수가 참조하던 메모리 공간의 주소가 변경된 이유는 변수에 할당된 원시 값이 변경 불가능한 값이기 때문이다.
  ⇒ 원시 값이 변경 가능한 값이라면 재할당 시 기존 원시 값을 바꾸면 된다.
- 불변성을 갖는 원시 값을 할당한 변수는 재할당 이외에 변수 값을 변경할 수 있는 방법이 없다.
- 문자열은 다른 원시 값과 다르게 문자열 길이만큼 필요한 메모리 공간의 크기가 다르다. / 유사 배열 객체가 배열처럼 인덱스로 각 프로퍼티 값에 접근할 수 있고 length 프로퍼티를 가진다.

### **값에 의한 전달**

- 변수 score의 값을 할당받은 변수 copy는 변수 score와 다른 메모리 공간에 저장된 별개의 값이다.
- 변수 score의 값을 변경해도 copy 변수의 값은 변하지 않는다.

⇒ **변수엔 값이 전달되는 게 아니라 메모리 주소가 전달되기 때문이다.**

```jsx
var score = 80;
var copy = score;

score = 100;

console.log(score, copy); // 100 80
console.log(score === copy); // false
```

## 11.2 객체

자바스크립트는 클래스 없이 객체를 생성할 수 있고, 객체가 생성된 이후라도 동적으로 프로퍼티와 메서드를 추가할 수 있다.

⇒ 생성과 프로퍼티 접근 비용이 많이 들어 성능이 클래스 기반 객체지향 프로그래밍 언어의 객체보다 낮다.

⇒ [히든 클래스](https://engineering.linecorp.com/ko/blog/v8-hidden-class)(프로퍼티가 바뀔 때 각각 그 프로퍼티의 오프셋을 업데이트한 뒤 그 값을 가지고 있는 방식) 방식으로 성능 보완

### **변경 가능한 값**

- 객체를 할당한 변수를 참조하면 메모리에 저장돼 있는 참조 값으로 실제 객체에 접근한다.
- 객체를 할당한 변수는 “변수는 객체를 참조하고 있다 ” 또는 “변수는 객체를 가리키고 있다”고 표현한다.
- 메모리에 저장된 객체를 직접 수정할 수 있다.
- 객체가 변경 가능한 값으로 설계된 이유?

⇒ 객체는 크기가 제각각이며, 복사해서 생성하는 비용이 많이 든다.

⇒ 객체를 복사해 생성하는 비용을 절약해 성능을 향상시키고, 메모리를 효율적으로 사용하기 위해 객체는 변경 가능한 값으로 설계됐다.

- 단점: 여러 개의 식별자가 하나의 객체를 공유할 수 있다.
- 얕은 복사와 깊은 복사 ⇒ 원본과 다른 객체다. 원본 변경 시 복사본 변경 안됨
  - 얕은 복사: 한 단계까지 복사하는 것 / 객체에 중첩돼 있는 객체의 경우 참조값을 복사한다.
  - 깊은 복사: 객체에 중첩돼 있는 객체까지 모두 복사하는 것 / 원시 값처럼 완전한 복사본을 만든다.

### **참조에 의한 전달**

- 원본의 참조 값이 복사돼 전달되는 것
- 원본과 복사본이 저장된 메모리 주소는 다르지만 동일한 참조 값(객체)을 가진다.

⇒ 2개의 식별자가 하나의 객체를 공유한다.

⇒ 객체의 프로퍼티 값을 변경하거나 추가, 삭제하면 서로 영향을 주고 받는다.

❓자바스크립트에 ”참조에 의한 전달”은 존재하지 않고 “값에 의한 전달”만 존재한다.
